{"pages":[{"title":"tags","text":"","link":"/tags/index.html"},{"title":"文章分类","text":"","link":"/categories/index.html"},{"title":"关于","text":"博客内容主要记录日常使用过觉得比较有趣的东西，以及分享自己学到的东西 ~","link":"/about/index.html"}],"posts":[{"title":"Nacos 集群环境安装","text":"一、什么是nacos ?1.1 nacos 官方介绍 Nacos 致力于帮助您发现、配置和管理微服务。Nacos 提供了一组简单易用的特性集，帮助您快速实现动态服务发现、服务配置、服务元数据及流量管理。Nacos 帮助您更敏捷和容易地构建、交付和管理微服务平台。 Nacos 是构建以“服务”为中心的现代应用架构 (例如微服务范式、云原生范式) 的服务基础设施。 简单说， nacos 可以注册 spring cloud 服务也可以管理服务的配置， 用来替代 eureka, consul, 以及 spring cloud config 1.2 nacos 的集群结构图graph TD A[Nacos client] --> B(Nginx) B --> D[Nacos Server 1] B --> E[Nacos Server 2] B --> F[Nacos Server 3] E --> H F --> H D --> H[高可用 MySQL] O[Nacos 调用流程] 二、Nacos 的下载Nacos 不像 eureka 直接是以 jar 的形式运行， nacos 是需要下载和安装和 consul 一样，这里下载的版本是 1.1.4 2.1 下载地址 下载完成后可以得到一个 zip 或者 tar.gz 包，解压便可以 12345678910111213nacos/├── bin│ ├── shutdown.cmd # Windows 关闭│ ├── shutdown.sh # Linux/Unix/Mac 关闭│ ├── startup.cmd # Windows 启动│ └── startup.sh # Linux/Unix/Mac 启动├── conf│ ├── application.properties│ ├── application.properties.example│ ├── cluster.conf.example│ ├── nacos-logback.xml│ ├── nacos-mysql.sql│ └── schema.sql 三、Nacos 的 单机版本运行3.1 单机版本部署适用于测试期间，直接运行命令就可以12Linux/Unix/Mac: sh startup.sh -m standaloneWindows: cmd startup.cmd -m standalone 3.2 运行成功就可以通过 http://localhost:8848/nacos 访问 Nacos 默认用户名密码是 nacos 以上是单机版的安装，非常简单就3步，1. 下载 -&gt; 2. 解压 -&gt; 3. 运行。 这只适用于测试，下面介绍集群环境的 nacos 安装 四、集群环境安装 集群环境需要 mysql (mariadb) 数据库，这里就不介绍怎么安装了 ~ 我这里是一台电脑操作， 所以是一个 ip， 三个不同的端口，数据库也只用一台 4.1 安装好 mysql 创建好数据库并导入 nacos/conf/nacos-mysql.sql 数据，导入完成后数据库存结构如下12345678910111213141516+----------------------+| Tables_in_nacos |+----------------------+| config_info || config_info_aggr || config_info_beta || config_info_tag || config_tags_relation || group_capacity || his_config_info || roles || tenant_capacity || tenant_info || users |+----------------------+11 rows in set (0.000 sec) 4.2 编辑 nacos/conf/application.properties123456789101112# springserver.contextPath=/nacosserver.servlet.contextPath=/nacosserver.port=8848spring.datasource.platform=mysql # mysql 平台# 有几个实例db.num=1# 如果有多个 mysql 实例这里就配置成多个# db.url.1 以此类推db.url.0=jdbc:mysql://localhost:3306/nacos?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=truedb.user=rootdb.password=123456 4.3 集群 ip 及端口修改 编辑nacos/conf/cluster.conf 文件 1234# 我这里是一台电脑， 所以 ip 是一样的172.31.216.142:8848172.31.216.142:8849172.31.216.142:8850 这里需要注意 ip 需要先用 hostname -i 查看是多少，否则会抛出异常，检测不到其它的 FOLLOWER 4.4 把 nacos 目录复制3份 因为我是在一台电脑上操作，所以把文件 nacos 目录复制3份 cp -r nacos nacos02 Nacos01 Nacos02 Nacos03 4.5 分别启动每个脚本123sh Nacos01/bin/startup.shsh Nacos02/bin/startup.shsh Nacos03/bin/startup.sh 到这里集群环境安装完成了~ 五、后续~ Nginx 配置 nacos 集群代理 Nacos 与 spring cloud 的结合使用","link":"/2020/01/15/nacos_installer/"},{"title":"python 在线写代码","text":"欢迎在下面留言讨论 ~","link":"/2020/01/13/python_online/"}],"tags":[{"name":"nacos","slug":"nacos","link":"/tags/nacos/"},{"name":"python","slug":"python","link":"/tags/python/"},{"name":"在线编辑器","slug":"在线编辑器","link":"/tags/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/"}],"categories":[{"name":"nacos","slug":"nacos","link":"/categories/nacos/"},{"name":"python","slug":"python","link":"/categories/python/"},{"name":"spring cloud","slug":"spring-cloud","link":"/categories/spring-cloud/"}]}